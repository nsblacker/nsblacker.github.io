<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Menlo:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="CoreData," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="CoreData&amp;#x4E0E;SQLite3
&amp;#x6628;&amp;#x5929;&amp;#x88AB;&amp;#x95EE;&amp;#x5230; SQLite3&amp;#x4E0E;Core Data&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x533A;&amp;#x522B;&amp;#xFF0C;&amp;#x5F53;&amp;#x65F6;&amp;#x53EA;&amp;#x662F;&amp;#x60F3;&amp;#x5230;&amp;#x4E86;&amp;#x4E00">
<meta property="og:type" content="article">
<meta property="og:title" content="数据持久化:初识CoreData">
<meta property="og:url" content="http://yoursite.com/2016/06/22/数据持久化-初识CoreData/index.html">
<meta property="og:site_name" content="NSBlacker">
<meta property="og:description" content="CoreData&amp;#x4E0E;SQLite3
&amp;#x6628;&amp;#x5929;&amp;#x88AB;&amp;#x95EE;&amp;#x5230; SQLite3&amp;#x4E0E;Core Data&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x533A;&amp;#x522B;&amp;#xFF0C;&amp;#x5F53;&amp;#x65F6;&amp;#x53EA;&amp;#x662F;&amp;#x60F3;&amp;#x5230;&amp;#x4E86;&amp;#x4E00">
<meta property="og:updated_time" content="2016-06-23T02:09:36.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据持久化:初识CoreData">
<meta name="twitter:description" content="CoreData&amp;#x4E0E;SQLite3
&amp;#x6628;&amp;#x5929;&amp;#x88AB;&amp;#x95EE;&amp;#x5230; SQLite3&amp;#x4E0E;Core Data&amp;#x6709;&amp;#x4EC0;&amp;#x4E48;&amp;#x533A;&amp;#x522B;&amp;#xFF0C;&amp;#x5F53;&amp;#x65F6;&amp;#x53EA;&amp;#x662F;&amp;#x60F3;&amp;#x5230;&amp;#x4E86;&amp;#x4E00">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> 数据持久化:初识CoreData | NSBlacker </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">NSBlacker</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">此人决不闷骚</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                数据持久化:初识CoreData
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-22T12:53:23+08:00" content="2016-06-22">
              2016-06-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/iOS/基础知识/" itemprop="url" rel="index">
                    <span itemprop="name">基础知识</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/22/数据持久化-初识CoreData/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/22/数据持久化-初识CoreData/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/06/22/数据持久化-初识CoreData/" class="leancloud_visitors" data-flag-title="数据持久化:初识CoreData">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">阅读次数 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="CoreData&#x4E0E;SQLite3"><a href="#CoreData&#x4E0E;SQLite3" class="headerlink" title="CoreData&#x4E0E;SQLite3"></a>CoreData&#x4E0E;SQLite3</h3><hr>
<p>&#x6628;&#x5929;&#x88AB;&#x95EE;&#x5230; SQLite3&#x4E0E;Core Data&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#xFF0C;&#x5F53;&#x65F6;&#x53EA;&#x662F;&#x60F3;&#x5230;&#x4E86;&#x4E00;&#x4E2A;&#x662F;&#x5145;&#x5206;&#x5229;&#x7528;&#x4E86;&#x4F20;&#x7EDF;&#x7684;SQL&#x8BED;&#x53E5;&#xFF0C;&#x53E6;&#x4E00;&#x4E2A;&#x662F;&#x5145;&#x5206;&#x5229;&#x7528;&#x4E86;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x7F16;&#x7A0B;&#x65B9;&#x6CD5;&#xFF0C;&#x4ECA;&#x5929;&#x65E9;&#x4E0A;&#x60F3;&#x4E86;&#x4E00;&#x4F1A;&#xFF0C;&#x51B3;&#x5B9A;&#x4EE5;&#x540E;&#x518D;&#x6709;&#x4EBA;&#x95EE;&#x6211;&#x8FD9;&#x4E2A;&#x95EE;&#x9898;&#x6211;&#x5C31;&#x8FD9;&#x4E48;&#x56DE;&#x7B54;&#xFF1A;</p>
<p>&#x4E24;&#x4E2A;&#x65B9;&#x6CD5;&#x90FD;&#x53EF;&#x4EE5;&#x5B8C;&#x6210;IOS&#x4E2D;&#x6570;&#x636E;&#x6301;&#x4E45;&#x5316;&#x7684;&#x4EFB;&#x52A1;&#xFF0C;&#x90FD;&#x662F;ORM&#xFF08;object&#xFF0D;relational<br>mapping&#xFF09;&#x5173;&#x7CFB;&#xFF0D;&#x5BF9;&#x8C61;&#x6620;&#x5C04;&#x7684;&#x89E3;&#x51B3;&#x65B9;&#x6848;<a id="more"></a>&#xFF0C;SQLIte3&#x672C;&#x8EAB;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7684;&#x5BB9;&#x5668;&#xFF0C;&#x642D;&#x914D;&#x4E00;&#x5957;&#x65B9;&#x6CD5;&#xFF0C;&#x5355;&#x7EAF;&#x6EF4;&#x4F7F;&#x7528;SQLite3&#x7C7B;&#x4F3C;Java &#x7684;MySQL&#xFF0B;JDBC&#xFF0C;&#x5373;&#x6709;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5B9E;&#x4F53;&#x548C;&#x4E00;&#x5957;&#x63A7;&#x5236;&#x6570;&#x636E;&#x5E93;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x8FDE;&#x63A5;&#x597D;&#x5C31;&#x53EF;&#x4EE5;&#x5EFA;&#x7ACB;SQL&#x8BED;&#x53E5;&#xFF0C;execute&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;SQLite3&#x5C31;&#x662F;&#x8FD9;&#x6837;&#x7684;&#xFF0C;&#x7B80;&#x5355;&#x7C97;&#x66B4;&#xFF01;   &#x53E6;&#x4E00;&#x65B9;&#x9762;&#xFF0C;Core Data&#x662F;&#x82F9;&#x679C;&#x63A8;&#x5D07;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x672C;&#x8EAB;&#x76F8;&#x5F53;&#x4E8E;&#x4E00;&#x4E2A;&#x5E93;&#xFF0C;&#x63D0;&#x4F9B;&#x4E86;&#x8BBF;&#x95EE;&#x6570;&#x636E;&#x7C7B;&#x548C;&#x65B9;&#x6CD5;&#xFF0C;&#x90A3;&#x4E48;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x7684;&#x53E6;&#x4E00;&#x4E2A;&#x8981;&#x7D20;&#x2014;&#x2014;&#x5B58;&#x50A8;&#x6570;&#x636E;&#x7684;&#x5BB9;&#x5668;&#x662F;&#x8C01;&#x5462;&#xFF1F;&#x81EA;&#x95EE;&#x81EA;&#x7B54;&#xFF1A;&#x53EF;&#x4EE5;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x6587;&#x4EF6;&#x3001;xml&#xFF0C;&#x800C;&#x4E14;&#x6700;&#x91CD;&#x8981;&#x7684;&#x5176;&#x5B9E;&#x662F;SQLite3&#xFF0C;&#x4E0D;&#x8FC7;&#x8FD9;&#x5012;&#x662F;&#x6CA1;&#x5565;&#x5927;&#x4E0D;&#x4E86;&#x7684;&#x3002;</p>
<p>&#x8DD1;&#x504F;&#x4E86;&#xFF01;&#x5728;Core Data&#x63D0;&#x4F9B;&#x7684;&#x5B58;&#x50A8;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;&#x4E0D;&#x518D;&#x6709;&#x6570;&#x636E;&#x8868;&#x2014;&#x2014;&gt;&#x5B57;&#x6BB5;&#x7684;&#x6982;&#x5FF5;&#xFF0C;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x7684;&#x5B9E;&#x4F53;&#xFF08;Entity&#xFF09;&#x2014;&#x2014;&gt;&#x5C5E;&#x6027;&#xFF08;Property&#xFF09;&#x8FD9;&#x4E2A;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF0C;&#x5B57;&#x6BB5;&#x4E2D;&#x6709;value&#xFF0C;type&#xFF0C;&#x53D6;&#x800C;&#x4EE3;&#x4E4B;&#x7684;&#x662F;Property&#x4E2D;&#x7684;Attributes&#xFF08;&#x7279;&#x6027;&#xFF09;&#x4E2D;&#x7684;attribute name&#xFF0C;type &#xFF08;&#x6211;&#x8FD9;&#x79CD;&#x5206;&#x7C7B;&#x5E94;&#x8BE5;&#x662F;&#x548C;&#x522B;&#x4EBA;&#x7684;&#x5206;&#x7C7B;&#x65B9;&#x6CD5;&#x4E0D;&#x4E00;&#x6837;&#xFF0C;&#x56E0;&#x4E3A;&#x6211;&#x60F3;&#x7A81;&#x51FA;&#x8FD9;&#x91CC;&#x548C;&#x6570;&#x636E;&#x5E93;&#x7684;&#x5BF9;&#x5E94;&#x5173;&#x7CFB;&#xFF0C;&#x5176;&#x5B9E;&#x8C8C;&#x4F3C;&#x6CA1;&#x5565;&#x7528;&#x5475;&#x5475;&#xFF09;&#x3002;&#x800C;&#x4E14;&#x5728;&#x5B58;&#x50A8;&#x548C;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x901A;&#x8FC7;KVC&#x6765;&#x4ECE;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x627E;&#x5230;&#x5B9E;&#x4F53;&#x548C;&#x7279;&#x6027;&#xFF0C;&#x800C;&#x4E14;&#x5C31;&#x662F;&#x4ED6;&#x4EEC;&#x7684;&#x540D;&#x5B57;&#xFF01;&#x800C;&#x4E14;xcode&#x4E2D;&#x53EF;&#x89C6;&#x5316;&#x6DFB;&#x52A0;&#x5B9E;&#x4F53;&#x548C;&#x5C5E;&#x6027;&#xFF0C;&#x7C7B;&#x4F3C;phpadmin&#xFF0C;&#x4F46;&#x662F;CoreData&#x80FD;&#x591F;&#x628A;&#x5B9E;&#x4F53;&#x95F4;&#x7684;relationship&#x76F4;&#x89C2;&#x8868;&#x793A;&#x51FA;&#x6765;&#x3002;</p>
<p>&#xFF08;&#x8865;&#x5145;&#x4E00;&#x53E5;&#xFF0C;&#x4E0A;&#x9762;&#x8BF4;&#x5206;&#x7C7B;&#x65B9;&#x5F0F;&#x6709;&#x4E9B;&#x5947;&#x602A;&#xFF0C;&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x4E2A;Property&#x4E0B;&#x9762;&#x5176;&#x5B9E;&#x8FD8;&#x6709;&#x4E09;&#x4E2A;&#x5C5E;&#x6027;&#xFF1A;Attributes&#xFF0C;relationship&#xFF0C;fetch property&#xFF0C;&#x7531;&#x4E8E;&#x540E;&#x4E24;&#x8005;&#x662F;&#x5173;&#x7CFB;&#x548C;&#x64CD;&#x4F5C;&#x65B9;&#x9762;&#x800C;&#x975E;&#x4E0D;&#x662F;&#x6570;&#x636E;&#x65B9;&#x9762;&#x7684;&#xFF0C;&#x6240;&#x4EE5;&#x5176;&#x5B9E;&#x8981;&#x662F;&#x6CA1;&#x6709;&#x540E;&#x4E24;&#x8005;&#xFF0C;Attributes&#x662F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;Entity&#x7684;&#x76F4;&#x63A5;&#x4E0B;&#x7EA7;&#x7684;&#xFF0C;Property&#x5B58;&#x5728;&#x7684;&#x6982;&#x5FF5;&#x4E45;&#x6DE1;&#x5316;&#x4E86;&#xFF09;</p>
<p>&#x6240;&#x4EE5;&#xFF0C;&#x5982;&#x679C;&#x4E60;&#x60EF;&#x7528;SQL&#x8BED;&#x53E5;&#x5C31;&#x7528;SQLite3&#xFF0C;&#x5982;&#x679C;&#x559C;&#x6B22;&#x7528;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7F16;&#x7A0B;&#x5C31;&#x7528;CoreData&#xFF0C;&#x4E0D;&#x8FC7;&#x6709;&#x4EBA;&#x8BF4;&#x6709;&#x4E9B;&#x4EFB;&#x52A1;CoreData&#x4E0D;&#x80FD;&#x5B8C;&#x6210;&#xFF0C;&#x8FD9;&#x4E2A;&#x6211;&#x4E0D;&#x6E05;&#x695A;&#x4E86;&#xFF0C;&#x603B;&#x4E4B;&#x5BF9;&#x6211;&#x73B0;&#x5728;&#x591F;&#x7528;&#x4E86;&#x3002;</p>
<h3 id="&#x7531;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x5165;&#x624B;"><a href="#&#x7531;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x5165;&#x624B;" class="headerlink" title="&#x7531;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x5165;&#x624B;"></a>&#x7531;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x5165;&#x624B;</h3><hr>
<p>1&#xFF0C; Managed Object Model</p>
<p>Managed Object Model &#x662F;&#x63CF;&#x8FF0;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x7684;&#x6570;&#x636E;&#x6A21;&#x578B;&#xFF0C;&#x8FD9;&#x4E2A;&#x6A21;&#x578B;&#x5305;&#x542B;&#x5B9E;&#x4F53;&#xFF08;Entity&#xFF09;&#xFF0C;&#x7279;&#x6027;&#xFF08;Property&#xFF09;&#xFF0C;&#x8BFB;&#x53D6;&#x8BF7;&#x6C42;&#xFF08;Fetch Request&#xFF09;&#x7B49;&#x3002;&#xFF08;&#x4E0B;&#x6587;&#x90FD;&#x4F7F;&#x7528;&#x82F1;&#x6587;&#x672F;&#x8BED;&#x3002;&#xFF09;</p>
<p>2&#xFF0C;Managed Object Context</p>
<p>Managed Object Context &#x53C2;&#x4E0E;&#x5BF9;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#xFF08;Managed Object&#xFF09;&#x8FDB;&#x884C;&#x5404;&#x79CD;&#x64CD;&#x4F5C;&#x7684;&#x5168;&#x8FC7;&#x7A0B;&#xFF0C;&#x5E76;&#x76D1;&#x6D4B;&#x6570;&#x636E;&#x5BF9;&#x8C61;&#x7684;&#x53D8;&#x5316;&#xFF0C;&#x4EE5;&#x63D0;&#x4F9B;&#x5BF9; undo/redo &#x7684;&#x652F;&#x6301;&#x53CA;&#x66F4;&#x65B0;&#x7ED1;&#x5B9A;&#x5230;&#x6570;&#x636E;&#x7684; UI&#x3002;</p>
<p>3&#xFF0C;Persistent Store Coordinator</p>
<p>Persistent Store Coordinator &#x76F8;&#x5F53;&#x4E8E;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x7BA1;&#x7406;&#x5668;&#xFF0C;&#x5904;&#x7406;&#x5E95;&#x5C42;&#x7684;&#x5BF9;&#x6570;&#x636E;&#x6587;&#x4EF6;&#x7684;&#x8BFB;&#x53D6;&#x4E0E;&#x5199;&#x5165;&#x3002;&#x4E00;&#x822C;&#x6211;&#x4EEC;&#x65E0;&#x9700;&#x4E0E;&#x5B83;&#x6253;&#x4EA4;&#x9053;&#x3002;&#x5728;context&#x7684;&#x64CD;&#x4F5C;&#x4E0B;&#xFF0C;&#x8D1F;&#x8D23;&#x5728;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x751F;&#x6210;&#x53D6;&#x51FA;managed object&#xFF0C;&#x6216;&#x8005;&#x5C06;managed Object&#x5B58;&#x5230;&#x6570;&#x636E;&#x5E93;</p>
<p>4&#xFF0C;Managed Object</p>
<p>Managed Object &#x6570;&#x636E;&#x5BF9;&#x8C61;&#xFF0C;&#x4E0E; Managed Object Context &#x76F8;&#x5173;&#x8054;&#x3002;</p>
<p>&#x5728;&#x6C34;&#x679C;&#x6559;&#x6750;&#x4E0A;&#x4E4B;&#x524D;&#x7684;&#x4F8B;&#x5B50;&#x4E2D;&#x6709;&#x51E0;&#x5904;&#x95EE;&#x9898;&#x6CA1;&#x6709;&#x61C2;&#xFF0C;&#x8FD9;&#x4E2A;&#x4F8B;&#x5B50;&#x662F;&#x53C8;&#x662F;&#x8D3C;&#x7B80;&#x5355;&#x2014;&#x2014;&#x56DB;&#x4E2A;&#x6587;&#x672C;&#x6846;&#xFF0C;&#x7528;&#x6237;&#x8F93;&#x5165;&#x5565;&#x90FD;&#x884C;&#xFF0C;home&#x65F6;&#x5F00;&#x59CB;&#x5B58;&#x6570;&#x636E;&#x5230;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x91CD;&#x65B0;active&#x540E;&#x8BFB;&#x51FA;&#x6570;&#x636E;&#x518D;&#x663E;&#x793A;&#x5230;textField&#x4E0A;&#xFF0C;&#x8BF4;&#x4E4B;&#x524D;&#x6211;&#x628A;&#x6574;&#x6BB5;&#x4EE3;&#x7801;&#x90FD;&#x8D34;&#x4E0A;&#xFF1A;</p>
<figure class="highlight m"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  ViewController.m</span><br><span class="line">//  Test Core Data</span><br><span class="line">//</span><br><span class="line">//  Created by &#x4F60;&#x731C; on <span class="number">15</span>/<span class="number">11</span>/<span class="number">27</span>.</span><br><span class="line">//  Copyright &#xA9; <span class="number">2015</span>&#x5E74; &#x4F60;&#x731C;. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import <span class="string">&quot;ViewController.h&quot;</span></span><br><span class="line">#import <span class="string">&quot;AppDelegate.h&quot;</span></span><br><span class="line"></span><br><span class="line">static NSString *const kLineEntityName <span class="built_in">=</span> @<span class="string">&quot;Line&quot;</span>;</span><br><span class="line">static NSString *const kLineNumber <span class="built_in">=</span> @<span class="string">&quot;lineNumber&quot;</span>;</span><br><span class="line">static NSString *const kLineTextKey <span class="built_in">=</span> @<span class="string">&quot;lineText&quot;</span>;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">interface</span> ViewController ()</span><br><span class="line"></span><br><span class="line">@property (strong , nonatomic)IBOutletCollection(UITextField) NSArray *lineFields;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@<span class="keyword">implementation</span> ViewController</span><br><span class="line"></span><br><span class="line">- (void)viewDidLoad {</span><br><span class="line">    [super viewDidLoad];</span><br><span class="line">    // Do any additional setup after loading the view, typically from a nib.</span><br><span class="line">    //&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<span class="number">1</span>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><br><span class="line">    AppDelegate *appdDelegate <span class="built_in">=</span> [UIApplication sharedApplication].delegate;</span><br><span class="line">    NSManagedObjectContext *context <span class="built_in">=</span> [appdDelegate managedObjectContext];</span><br><span class="line">    NSFetchRequest *request <span class="built_in">=</span> [[NSFetchRequest alloc] initWithEntityName:kLineEntityName];//get table</span><br><span class="line">    </span><br><span class="line">    NSError *error;</span><br><span class="line">    NSArray *object <span class="built_in">=</span> [context executeFetchRequest:request error:&amp;error];</span><br><span class="line">    <span class="built_in">if</span>(object<span class="built_in">=</span><span class="built_in">=</span>nil){</span><br><span class="line">        NSLog(@<span class="string">&quot;array id empty&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    for(NSManagedObject *oneObject in object){//get attribute in this table &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<span class="number">2</span>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><br><span class="line">        int lineNum <span class="built_in">=</span> [[oneObject valueForKey:kLineNumber] intValue];</span><br><span class="line">        NSString *lineText <span class="built_in">=</span> [oneObject valueForKey:kLineTextKey];</span><br><span class="line">        </span><br><span class="line">        UITextField *theField <span class="built_in">=</span> self.lineFields[lineNum];</span><br><span class="line">        theField.text <span class="built_in">=</span> lineText;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    UIApplication *app <span class="built_in">=</span> [UIApplication sharedApplication];</span><br><span class="line">    [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(applicationWillResignActive:) name:UIApplicationWillResignActiveNotification object:app ];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">-(void)applicationWillResignActive:(NSNotification *)notification {</span><br><span class="line"></span><br><span class="line">    AppDelegate *appDelegate <span class="built_in">=</span> [UIApplication sharedApplication].delegate;</span><br><span class="line">    NSManagedObjectContext *context <span class="built_in">=</span> [appDelegate managedObjectContext];</span><br><span class="line">    NSError *error;</span><br><span class="line">    for(int i <span class="built_in">=</span> <span class="number">0</span> ;i&lt;<span class="number">4</span> ; i++){</span><br><span class="line">        UITextField *theField <span class="built_in">=</span> self.lineFields[i];</span><br><span class="line">        </span><br><span class="line">        NSFetchRequest *request <span class="built_in">=</span> [[NSFetchRequest alloc]initWithEntityName:kLineEntityName];</span><br><span class="line">        NSPredicate *<span class="keyword">pred</span> <span class="built_in">=</span> [NSPredicate predicateWithFormat:@<span class="string">&quot;(%K = %d)&quot;</span>,kLineNumber,i];</span><br><span class="line">        [request setPredicate:<span class="keyword">pred</span>];</span><br><span class="line">        </span><br><span class="line">        NSArray *objects <span class="built_in">=</span> [context executeFetchRequest:request error:&amp;error];</span><br><span class="line">        <span class="built_in">if</span>(objects<span class="built_in">=</span><span class="built_in">=</span>nil){</span><br><span class="line">            NSLog(@<span class="string">&quot;something is wrong!&quot;</span>);</span><br><span class="line">        }</span><br><span class="line">        </span><br><span class="line">        NSManagedObject *theLine <span class="built_in">=</span> nil;</span><br><span class="line">        <span class="built_in">if</span>([objects count] &gt; <span class="number">0</span>){</span><br><span class="line">            theLine <span class="built_in">=</span> [objects objectAtIndex:<span class="number">0</span>];</span><br><span class="line">            </span><br><span class="line">        }<span class="built_in">else</span>{</span><br><span class="line">//&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<span class="number">3</span>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><br><span class="line"></span><br><span class="line"> theLine <span class="built_in">=</span> [NSEntityDescription </span><br><span class="line"> insertNewObjectForEntityForName:kLineEntityName inManagedObjectContext:context];                    </span><br><span class="line">&lt;span style<span class="built_in">=</span><span class="string">&quot;white-space:pre&quot;</span>&gt;	&lt;/span&gt;}</span><br><span class="line">[theLine setValue:[NSNumber numberWithInt:i] forKey:kLineNumber];</span><br><span class="line">[theLine setValue:theField.text forKey:kLineTextKey];    </span><br><span class="line">   }    </span><br><span class="line">[appDelegate saveContext];</span><br><span class="line">}</span><br><span class="line">- (void)didReceiveMemoryWarning {    [super didReceiveMemoryWarning];    // Dispose of any resources that can be recreated.</span><br><span class="line">}</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>&#x5176;&#x5B9E;&#x4E5F;&#x6CA1;&#x6709;&#x5565;&#xFF0C;&#x56E0;&#x4E3A;&#x5728;&#x7F16;&#x7A0B;&#x4E2D;&#x4F1A;&#x7528;&#x5230;&#x7684;&#x5176;&#x5B9E;&#x53EA;&#x6709;<font color="red">ManagedObjectContext</font>&#x548C;<font color="blue">ManagedObject</font>&#xFF08;&#x54E6;&#x8FD8;&#x6709;&#x4E0D;&#x5728;&#x8FD9;&#x91CC;&#x7684;<font color="green">NSFetchRequest</font>&#xFF09;&#xFF0C;&#x4E0B;&#x9762;&#x6211;&#x5C31;&#x60F3;&#x9488;&#x5BF9;&#x8FD9;&#x4E09;&#x4E2A;&#x7C7B;&#x8BF4;&#x4E00;&#x4E0B;&#xFF1A;</p>
<p>&#x5BF9;&#x4E8E;&#x5C0F;&#x7EA2;&#xFF08;&#x77E5;&#x9053;&#x6211;&#x8BF4;&#x7684;&#x8C01;&#x5427;&#xFF09;&#x548C;&#x5C0F;&#x7EFF;&#x6211;&#x60F3;&#x653E;&#x5230;&#x4E00;&#x8D77;&#x8BF4;&#xFF0C;&#x56E0;&#x4E3A;&#x5979;&#x4FE9;&#x662F;&#x597D;&#x670B;&#x53CB;&#xFF01;&#x770B;&#x8FD9;&#x4E48;&#x4E00;&#x6BB5;&#xFF1A;<br><figure class="highlight m"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">AppDelegate *appdDelegate <span class="built_in">=</span> [UIApplication sharedApplication].delegate;</span><br><span class="line">NSManagedObjectContext *context <span class="built_in">=</span> [appdDelegate managedObjectContext];</span><br><span class="line">NSFetchRequest *request <span class="built_in">=</span> [[NSFetchRequest alloc] initWithEntityName:kLineEntityName];//get table</span><br><span class="line">    </span><br><span class="line">NSError *error;</span><br><span class="line">NSArray *object <span class="built_in">=</span> [context executeFetchRequest:request error:&amp;error];</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x91CC;&#x518D;&#x8865;&#x5145;&#x70B9;&#xFF0C;&#x5728;&#x4E4B;&#x524D;&#x90A3;&#x7BC7;&#x4ECB;&#x7ECD;&#x6301;&#x4E45;&#x5316;&#x7684;&#x535A;&#x5BA2;&#x4E2D;&#xFF0C;&#x54D0;&#x54D0;&#x5730;&#x628A;NSManagedObjectContext&#x7684;&#x5B9A;&#x4E49;&#x90FD;&#x5199;&#x4E86;&#x4E00;&#x904D;&#xFF0C;&#x5176;&#x5B9E;&#x90A3;&#x4E2A;&#x662F;&#x5728;&#x5DE5;&#x7A0B;&#x6307;&#x5B9A;&#x4E86;&#x8981;&#x7528;Core Data&#x540E;&#x5728;AppDelegate&#x4E2D;&#x81EA;&#x52A8;&#x5199;&#x597D;&#x5566;&#xFF0C;&#x524D;&#x51E0;&#x5929;&#x6BD4;&#x8F83;&#x50BB;&#xFF0C;&#x73B0;&#x5728;&#x6709;&#x70B9;&#x8C41;&#x7136;&#x5F00;&#x6717;&#x7684;&#x611F;&#x89C9;&#xFF0C;&#x6240;&#x4EE5;&#x4E0B;&#x89C9;&#x5FC3;&#x628A;&#x8FD9;&#x91CC;&#x597D;&#x597D;&#x5199;&#x7740;&#x3002;<br>&#x8BF4;&#x4E0A;&#x9762;&#x8FD9;&#x6BB5;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x5148;&#x628A;&#x4E66;&#x4E0A;&#x7684;&#x539F;&#x8BDD;&#x7801;&#x51FA;&#x6765; &#x201C;&#x8BE5;&#x65B9;&#x6CD5;&#x9996;&#x5148;&#x83B7;&#x53D6;&#x5BF9;&#x5E94;&#x7528;&#x59D4;&#x6258;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x6211;&#x4EEC;&#x5C06;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x5F15;&#x7528;&#x83B7;&#x5F97;&#x6211;&#x4EEC;&#x521B;&#x5EFA;&#x7684;&#x6258;&#x7BA1;&#x5BF9;&#x8C61;&#x4E0A;&#x4E0B;&#x6587;&#x201D; -_-#&#x6211;&#x64E6;&#x8FD9;&#x8BDD;&#x7EC4;&#x7EC7;&#x7684;&#x65E0;&#x53EF;&#x6311;&#x5254;&#xFF0C;&#x5C31;&#x662F;&#x5B8C;&#x5168;&#x4E0D;&#x61C2;&#xFF01; &#x6211;&#x5C31;&#x7406;&#x89E3;&#xFF1A;&#x6709;&#x4E86;&#x8FD9;&#x4E24;&#x53E5;&#x540E;&#xFF0C;&#x8FD9;&#x4E2A;context&#x5C31;&#x725B;&#x903C;&#x4E86;&#xFF0C;&#x4E3A;&#x5565;&#xFF0C;&#x56E0;&#x4E3A;&#x4ED6;&#x627F;&#x8F7D;&#x4E86;APPDelegate&#x4E2D;&#x6700;&#x5C11;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x6240;&#x8C13; &#x201C;&#x5343;&#x8A00;&#x4E07;&#x8BED;&#x6C47;&#x6210;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;&#x201D;&#xFF01;&#x8FD9;&#x4E4B;&#x540E;&#x8FD9;&#x4E2A;context&#x5C31;&#x53EF;&#x4EE5;&#x5728;&#x672C;&#x8F6E;&#x6570;&#x636E;&#x64CD;&#x4F5C;&#x4E2D;&#x5982;&#x5165;&#x65E0;&#x4EBA;&#x4E4B;&#x5883;&#xFF0C;&#x56E0;&#x4E3A;&#x90A3;&#x4E09;&#x4E2A;&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x628A;&#x8FDE;&#x63A5;&#x6570;&#x636E;&#x5E93;&#xFF0C;&#x8BBE;&#x7F6E;App&#x4EE3;&#x7406;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x4EE5;&#x540E;&#x5C31;&#x53EF;&#x914D;&#x5408;&#x5176;&#x4ED6;&#x53C2;&#x6570;&#xFF08;&#x5982;&#x5C0F;&#x7EFF;&#xFF09;&#x4EFB;&#x610F;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x4E86;&#x3002;</p>
<p>&#x8BF4;&#x5B8C;&#x5C0F;&#x7EA2;&#xFF0C;&#x8BF4;&#x4ED6;&#x7684;&#x670B;&#x53CB;&#x5C0F;&#x7EFF;&#xFF0C;&#x7533;&#x8BF7;&#x4E86;&#x4E00;&#x4E2A;&#x53BB;&#x67E5;&#x8BE2;&#x53D8;&#x91CF;&#xFF0C;&#x4F46;&#x662F;&#xFF0C;&#x8981;&#x9A91;&#x9A6C;&#x8981;&#x6307;&#x5B9A;&#x54EA;&#x4E2A;&#x5B9E;&#x4F53;&#x3002;&#x8FD9;&#x91CC;&#x6211;&#x53EA;&#x60F3;&#x8BF4;&#x4E00;&#x4E2A;&#x5730;&#x513F;&#xFF0C;&#x5C31;&#x662F;&#x4E4B;&#x524D;&#x770B;&#x5230;&#x7684;&#x58F0;&#x660E;NSFetchRequest&#xFF0C;&#x90FD;&#x8DDF;&#x7740;&#x4E00;&#x5806;&#xFF0C;&#x5305;&#x62EC;&#x6307;&#x51FA;&#x9488;&#x5BF9;&#x7684;&#x5B9E;&#x4F53;&#xFF0C;&#x6309;&#x7167;&#x8FD9;&#x79CD;init&#x7684;&#x65F6;&#x5019;&#x76F4;&#x63A5;&#x6307;&#x51FA;&#x5C31;&#x597D;&#x4E86;&#xFF0C;&#x5F53;&#x7136;&#x8FD9;&#x91CC;&#x6CA1;&#x6709;&#x52A0;&#x4EFB;&#x4F55;&#x8C13;&#x8BCD;&#xFF0C;&#x6709;&#x8C13;&#x8BCD;&#x7684;&#x8BDD;&#x8FD8;&#x662F;&#x8981;&#x5404;&#x79CD;set&#x7684;&#xFF08;&#x6BD4;&#x5982;&#x6700;&#x5927;&#x67E5;&#x8BE2;&#x6761;&#x6570;&#x3001;&#x5927;&#x5C0F;&#x6761;&#x4EF6;&#x3001;&#x67D0;&#x65F6;&#x95F4;&#x540E;&#x7B49;&#xFF09;&#xFF0C;&#x8FD8;&#x662F;&#x8981;&#x770B;&#x672C;&#x7BC7;&#x7684;&#x59D0;&#x59B9;&#x7BC7;&#x3002;</p>
<p>&#x54E6;&#x5BF9;&#x4E86;&#xFF0C;&#x4E3A;&#x5565;&#x8BF4;&#x5C0F;&#x7EA2;&#x548C;&#x5C0F;&#x7EFF;&#x662F;&#x597D;&#x670B;&#x53CB;&#x5462;&#xFF1F;&#x5C31;&#x662F;&#x56E0;&#x4E3A;&#x8FD9;&#x53E5;:</p>
<figure class="highlight m"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NSArray *object <span class="built_in">=</span> [context executeFetchRequest:request error:&amp;error];</span><br></pre></td></tr></table></figure>
<p>&#x8FD9;&#x4EB2;&#x6635;&#x7A0B;&#x5EA6;&#x4E00;&#x76EE;&#x4E86;&#x7136;&#x3002;<br>&#x4E0B;&#x9762;&#x8981;&#x7ED3;&#x5408;&#x8FD9;&#x91CC;&#x8BF4;&#x5C0F;&#x84DD;:<br><figure class="highlight m"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">NSArray *object <span class="built_in">=</span> [context executeFetchRequest:request error:&amp;error];</span><br><span class="line">    <span class="built_in">if</span>(object<span class="built_in">=</span><span class="built_in">=</span>nil){</span><br><span class="line">        NSLog(@<span class="string">&quot;array id empty&quot;</span>);</span><br><span class="line">    }</span><br><span class="line">    for(NSManagedObject *oneObject in object){//get attribute in this table &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<span class="number">2</span>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><br></pre></td></tr></table></figure></p>
<p>&#x8FD9;&#x4E2A;object&#xFF0C;&#x5176;&#x5B9E;&#x662F;objects&#xFF0C;&#x56E0;&#x4E3A;&#x8FD9;&#x91CC;&#x5B58;&#x4E86;&#x4E0D;&#x6B62;&#x4E00;&#x6761;&#x67E5;&#x8BE2;&#x7ED3;&#x679C;&#x3002;&#x5176;&#x5B9E;&#x8FD9;&#x90E8;&#x5206;&#x6211;&#x60F3;&#x8BF4;&#x7684;&#x91CD;&#x70B9;&#x662F;&#xFF08;&#x8FD9;&#x91CC;&#x672C;&#x6765;&#x60F3;&#x52A0;&#x4E00;&#x4E2A;&#x201C;&#x81EA;&#x8BA4;&#x4E3A;&#x662F;&#x91CD;&#x70B9;&#x201C;&#x6765;&#x7740;&#xFF0C;&#x53CD;&#x6B63;&#x6CA1;&#x4EBA;&#x770B;&#x7D22;&#x6027;&#x6709;&#x5220;&#x6389;&#x4E86;&#xFF08;&#x8FD9;&#x5FC3;&#x7406;&#x620F;&#x662F;&#x6709;&#x591A;&#x8DB3;&#xFF1F;&#xFF09;&#xFF09;&#x8FD9;&#x4E2A;oneObject&#xFF0C;  &#x6CE8;&#x610F;&#x770B;&#x4ED6;&#x7684;&#x7C7B;&#x578B;&#x2014;&#x2014;NSManagedObject&#xFF01;&#x5373;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x5B58;&#x50A8;&#x4E86;&#x8FD9;&#x4E2A;&#x5B9E;&#x4F53;&#x7684;&#x6240;&#x6709;attribute&#xFF0C;&#x6027;&#x547D;&#x3001;&#x6027;&#x522B;&#x3001;&#x5E74;&#x9F84;&#x3001;&#x6240;&#x9009;&#x8BFE;&#x7A0B;&#x7EC4;&#x6210;&#x7684;&#x4E00;&#x6761;&#x7ED3;&#x679C;&#x7684;&#x6240;&#x6709;&#x4FE1;&#x606F;&#x90FD;&#x5B58;&#x5728;&#x8FD9;&#x4E2A;oneObject&#x4E2D;&#xFF0C;&#x55E8;&#x5C31;&#x662F;&#x6570;&#x636E;&#x5E93;&#x4E2D;&#x7684;&#x4E00;&#x884C;&#xFF0C;&#x53D6;&#x5F97;&#x65F6;&#x5019;&#x76F4;&#x63A5;&#x7528;KVC&#xFF1A;</p>
<p>NSString *name = [oneObject valueForKey:@&#x201D;&#x59D3;&#x540D;&#x201D;] ;</p>
<p>int age = [[oneObject valueForKey:@&#x201D;&#x5E74;&#x9F84;&#x201D;] intValue];</p>
<figure class="highlight m"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">if</span>([objects count] &gt; <span class="number">0</span>){</span><br><span class="line">            theLine <span class="built_in">=</span> [objects objectAtIndex:<span class="number">0</span>];</span><br><span class="line">            </span><br><span class="line">        }<span class="built_in">else</span>{</span><br><span class="line">//&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;<span class="number">3</span>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><br><span class="line">            theLine <span class="built_in">=</span> [NSEntityDescription insertNewObjectForEntityForName:kLineEntityName inManagedObjectContext:context];                    </span><br><span class="line">}</span><br><span class="line">[theLine setValue:[NSNumber numberWithInt:i] forKey:kLineNumber];</span><br><span class="line">[theLine setValue:theField.text forKey:kLineTextKey];</span><br></pre></td></tr></table></figure>
<p>&#x81F3;&#x4E8E;&#x8FD9;&#x6700;&#x540E;&#x4E00;&#x5904;&#xFF0C;&#x5C31;&#x662F;insert&#x7684;&#x7528;&#x6CD5;&#x4E86;&#xFF0C;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x641C;&#x7D22;&#x6570;&#x636E;&#x3002;&#x53EA;&#x8981;&#x5F97;&#x5230;&#x80FD;&#x63A7;&#x5236;&#x6570;&#x636E;&#x7684;handler&#xFF08;&#x6211;&#x60F3;&#x8FD9;&#x6837;&#x79F0;&#x547C;&#xFF09;&#xFF0C;&#x7528;&#x8FD9;&#x4E2A;&#x672C;&#x6765;&#x5C31;&#x662F;NSManagedObject&#x5B9E;&#x4F8B;&#x7684;theLine&#x53D8;&#x91CF;&#x6B63;&#x5408;&#x9002;&#xFF01;&#x6309;&#x7167;KVC&#x63D2;&#x5165;&#x7684;&#x539F;&#x5219;&#x63D2;&#x503C;&#x5C31;&#x53EF;&#x4EE5;&#x4E86;&#x3002;<br>&#x8C8C;&#x4F3C;&#x8FD9;&#x91CC;&#x60F3;&#x8BF4;&#x7684;&#x5C31;&#x662F;&#x8FD9;&#x4E9B;&#xFF0C;&#x8FD8;&#x6709;&#x5C31;&#x662F;&#x5173;&#x4E8E;relationship&#x548C;fetch property&#x7684;&#xFF0C;&#x6709;&#x673A;&#x4F1A;&#x804A;&#x3002;&#x3002;&#x3002;</p>
<p>&#x6700;&#x540E;&#x7684;&#x6700;&#x540E;&#xFF0C;&#x8FD8;&#x662F;&#x76F4;&#x63A5;&#x628A;&#x4E00;&#x76F4;&#x8BF4;&#x7684;&#x59CA;&#x59B9;&#x7BC7;&#x4E2D;&#x8BF4;&#x7684;&#x90A3;&#x4E09;&#x4E2A;&#x51FD;&#x6570;&#x90FD;&#x8D34;&#x5230;&#x8FD9;&#x91CC;&#x5427;&#xFF1A;</p>
<p>&#x65B0;&#x5EFA;&#x5DE5;&#x7A0B;&#xFF0C;&#x5982;&#x679C;&#x9009;&#x62E9;&#x4E86;Core Data&#xFF0C;&#x4F1A;&#x5728;AppDelegate&#x4E2D;&#x5199;&#x597D;&#x8BE5;&#x5199;&#x7684;&#xFF1B;&#x628A;Core Data&#x7684;&#x5934;&#x6587;&#x4EF6;&#x94FE;&#x63A5;&#x8FDB;&#x6765;&#xFF1B;&#x9700;&#x8981;&#x7684;framework&#x4E5F;&#x5BFC;&#x5165;&#xFF0C;&#x7CFB;&#x7EDF;&#x81EA;&#x52A8;&#x5199;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#xFF1A;</p>
<figure class="highlight m"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  AppDelegate.h</span><br><span class="line">//  Test Core Data</span><br><span class="line">//</span><br><span class="line">//  Created by &#x90A3;&#x5F3A; on <span class="number">15</span>/<span class="number">11</span>/<span class="number">27</span>.</span><br><span class="line">//  Copyright &#xA9; <span class="number">2015</span>&#x5E74; &#x90A3;&#x5F3A;. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">#import &lt;CoreData/CoreData.h&gt;</span><br><span class="line"></span><br><span class="line">@<span class="keyword">interface</span> AppDelegate : UIResponder &lt;UIApplicationDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (strong, nonatomic) UIWindow *window;</span><br><span class="line"></span><br><span class="line">@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;</span><br><span class="line">@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;</span><br><span class="line">@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;</span><br><span class="line"></span><br><span class="line">- (void)saveContext;</span><br><span class="line">- (NSURL *)applicationDocumentsDirectory;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">//</span><br><span class="line">//  AppDelegate.m</span><br><span class="line">//  Test Core Data</span><br><span class="line">//</span><br><span class="line">//  Created by &#x90A3;&#x5F3A; on 15/11/27.</span><br><span class="line">//  Copyright &#xA9; 2015&#x5E74; &#x90A3;&#x5F3A;. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &quot;AppDelegate.h&quot;</span><br><span class="line"></span><br><span class="line">@interface AppDelegate ()</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">@implementation AppDelegate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {</span><br><span class="line">    // Override point for customization after application launch.</span><br><span class="line">    return YES;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (void)applicationWillResignActive:(UIApplication *)application {</span><br><span class="line">    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.</span><br><span class="line">    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (void)applicationDidEnterBackground:(UIApplication *)application {</span><br><span class="line">    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.</span><br><span class="line">    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (void)applicationWillEnterForeground:(UIApplication *)application {</span><br><span class="line">    // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (void)applicationDidBecomeActive:(UIApplication *)application {</span><br><span class="line">    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (void)applicationWillTerminate:(UIApplication *)application {</span><br><span class="line">    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.</span><br><span class="line">    // Saves changes in the application&apos;s managed object context before the application terminates.</span><br><span class="line">    [self saveContext];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#pragma mark - Core Data stack</span><br><span class="line"></span><br><span class="line">@synthesize managedObjectContext = _managedObjectContext;</span><br><span class="line">@synthesize managedObjectModel = _managedObjectModel;</span><br><span class="line">@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;</span><br><span class="line"></span><br><span class="line">- (NSURL *)applicationDocumentsDirectory {</span><br><span class="line">    // The directory the application uses to store the Core Data store file. This code uses a directory named &quot;com.tcl.hello.Test_Core_Data&quot; in the application&apos;s documents directory.</span><br><span class="line">    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (NSManagedObjectModel *)managedObjectModel {</span><br><span class="line">    // The managed object model for the application. It is a fatal error for the application not to be able to find and load its model.</span><br><span class="line">    if (_managedObjectModel != nil) {</span><br><span class="line">        return _managedObjectModel;</span><br><span class="line">    }</span><br><span class="line">    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@&quot;Test_Core_Data&quot; withExtension:@&quot;momd&quot;];</span><br><span class="line">    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];</span><br><span class="line">    return _managedObjectModel;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {</span><br><span class="line">    // The persistent store coordinator for the application. This implementation creates and returns a coordinator, having added the store for the application to it.</span><br><span class="line">    if (_persistentStoreCoordinator != nil) {</span><br><span class="line">        return _persistentStoreCoordinator;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    // Create the coordinator and store</span><br><span class="line">    </span><br><span class="line">    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];</span><br><span class="line">    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@&quot;Test_Core_Data.sqlite&quot;];</span><br><span class="line">    NSError *error = nil;</span><br><span class="line">    NSString *failureReason = @&quot;There was an error creating or loading the application&apos;s saved data.&quot;;</span><br><span class="line">    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&amp;error]) {</span><br><span class="line">        // Report any error we got.</span><br><span class="line">        NSMutableDictionary *dict = [NSMutableDictionary dictionary];</span><br><span class="line">        dict[NSLocalizedDescriptionKey] = @&quot;Failed to initialize the application&apos;s saved data&quot;;</span><br><span class="line">        dict[NSLocalizedFailureReasonErrorKey] = failureReason;</span><br><span class="line">        dict[NSUnderlyingErrorKey] = error;</span><br><span class="line">        error = [NSError errorWithDomain:@&quot;YOUR_ERROR_DOMAIN&quot; code:9999 userInfo:dict];</span><br><span class="line">        // Replace this with code to handle the error appropriately.</span><br><span class="line">        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.</span><br><span class="line">        NSLog(@&quot;Unresolved error %@, %@&quot;, error, [error userInfo]);</span><br><span class="line">        abort();</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    return _persistentStoreCoordinator;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (NSManagedObjectContext *)managedObjectContext {</span><br><span class="line">    // Returns the managed object context for the application (which is already bound to the persistent store coordinator for the application.)</span><br><span class="line">    if (_managedObjectContext != nil) {</span><br><span class="line">        return _managedObjectContext;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];</span><br><span class="line">    if (!coordinator) {</span><br><span class="line">        return nil;</span><br><span class="line">    }</span><br><span class="line">    _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];</span><br><span class="line">    [_managedObjectContext setPersistentStoreCoordinator:coordinator];</span><br><span class="line">    return _managedObjectContext;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">#pragma mark - Core Data Saving support</span><br><span class="line"></span><br><span class="line">- (void)saveContext {</span><br><span class="line">    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;</span><br><span class="line">    if (managedObjectContext != nil) {</span><br><span class="line">        NSError *error = nil;</span><br><span class="line">        if ([managedObjectContext hasChanges] &amp;&amp; ![managedObjectContext save:&amp;error]) {</span><br><span class="line">            // Replace this implementation with code to handle the error appropriately.</span><br><span class="line">            // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development.</span><br><span class="line">            NSLog(@&quot;Unresolved error %@, %@&quot;, error, [error userInfo]);</span><br><span class="line">            abort();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>done!</p>

      
    </div>

    <div>
      
        
<div id="wechat_subscriber" style="display: block； padding: 10px 0; margin: 20px auto; width: 100%; text-align: center">
    <img id="wechat_subscriber_qcode" src="/uploads/wechat-qcode.jpg" alt="那强 wechat" style="width: 200px; max-width: 100%;"/>
    <div>加个微信 成为朋友吧</div>
</div>

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/CoreData/" rel="tag">#CoreData</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/06/19/Push-Notification（三）/" rel="next" title="Push_Notification（三）">
                <i class="fa fa-chevron-left"></i> Push_Notification（三）
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/06/22/数据持久化-概述/" rel="prev" title="数据持久化:概述">
                数据持久化:概述 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <div class="ds-share flat" data-thread-key="2016/06/22/数据持久化-初识CoreData/"
     data-title="数据持久化:初识CoreData"
     data-content=""
     data-url="http://yoursite.com/2016/06/22/数据持久化-初识CoreData/">
  <div class="ds-share-inline">
    <ul  class="ds-share-icons-16">

      <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
      <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
      <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
      <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
      <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>

    </ul>
    <div class="ds-share-icons-more">
    </div>
  </div>
</div>
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/06/22/数据持久化-初识CoreData/"
           data-title="数据持久化:初识CoreData" data-url="http://yoursite.com/2016/06/22/数据持久化-初识CoreData/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="那强" />
          <p class="site-author-name" itemprop="name">那强</p>
          <p class="site-description motion-element" itemprop="description">不问是非 只争高下</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">12</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/nsblacker" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/nq1991" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#CoreData与SQLite3"><span class="nav-number">1.</span> <span class="nav-text">CoreData与SQLite3</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#由一个例子入手"><span class="nav-number">2.</span> <span class="nav-text">由一个例子入手</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2015 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">那强</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"nsblackerhexo"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("NrFrAP2G6o7Fkg5AMJ0fSXRR-gzGzoHsz", "OfSTWB6PxCBjmsEgmt5kxzYv");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


</body>
</html>
